# План автоматизации тестирования покупки тура в Марракэш

## *1. Перечень автоматизируемых сценариев:*

### Возможность покупки тура _двумя_ способами:
1. Оплата по дебетовой карте
2. Оплата через кредит по данным карты

### Карты, представленные для тестирования (файл data.json):
- 4444 4444 4444 4441, status APPROVED
- 4444 4444 4444 4442, status DECLINED

### *Позитивные сценарии:*
:octocat: Оплата по дебетовой карте со статусом APPROVED:
   
#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - ввалидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Операция одобрена Банком", в БД в payment_entity появилась запись со статусом APPROVED

:octocat: Оплата по дебетовой карте со статусом DECLINED:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4442
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - ввалидное имя (например: Daria)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в payment_entity появилась запись со статусом DECLINED

:octocat: Оплата через кредит по данным карты со статусом APPROVED:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - ввалидное имя (например: Vladimir)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Операция одобрена Банком", в БД в credit_request_entity появилась запись со статусом APPROVED

:octocat: Оплата через кредит по данным карты со статусом DECLINED:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4442
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - ввалидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в credit_request_entity появилась запись со статусом DECLINED

### *Негативные сценарии:*

:octocat: Оплата по карте, указан невалидный номер карты:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - некорректный номер (например: 4444 4444 4444)
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - ввалидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Номер карты" появилось сообщение об ошибке "Неверный формат"

:octocat: Оплата по карте, указан невалидный месяц:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4441
4. Ввести в поле "Месяц" - число 00 или число 13
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - ввалидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Месяц" появилось сообщение об ошибке "Неверно указан срок действия карты"

:octocat: Оплата по карте, указан год с истекшим сроком действия:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 20 или 27)
6. Ввести в поле "Владелец" - ввалидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Год" появилось сообщение об ошибке "Истёк срок действия карты" или "Неверно указан срок действия карты"

:octocat: Оплата по карте, указано некорректное имя:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - некорректное имя (например: ggg или 888)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Владелец" появилось сообщение об ошибке "Неверное имя" 

:octocat:  Оплата по карте, указано некорректное значение CVC/CVV:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - ввалидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 2-х значный номер (например: 12)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "CVC/CVV" появилось сообщение об ошибке "Неверный формат"

:octocat:  Оплата по карте, указаны пустые поля:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить"
3. Оставить все поля пустыми
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: под каждым из полей появляется сообщение "Неверный формат", только под полем "Владелец" появляется сообщение "Поле обязательно для заполнения"

:octocat: Кредит по данным карты, указан невалидный номер карты:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - некорректный номер (например: 4444 4444 4444)
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - ввалидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Номер карты" появилось сообщение об ошибке "Неверный формат"

:octocat: Кредит по данным карты, указан невалидный месяц:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4441
4. Ввести в поле "Месяц" - число 00 или число 13
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - ввалидное имя (например: Anastasia)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Месяц" появилось сообщение об ошибке "Неверно указан срок действия карты"

:octocat: Кредит по данным карты, указан год с истекшим сроком действия:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 20 или 27)
6. Ввести в поле "Владелец" - ввалидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Год" появилось сообщение об ошибке "Истёк срок действия карты" или "Неверно указан срок действия карты"

:octocat: Кредит по данным карты, указано некорректное имя:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - некорректное имя (например: ggg или 888)
7. Ввести в поле "CVC/CVV" - 3-х значный номер (например: 123)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "Владелец" появилось сообщение об ошибке "Неверное имя" 

:octocat: Кредит по данным карты, указано некорректное значение CVC/CVV:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Ввести в поле "Номер карты" - 4444 4444 4444 4441
4. Ввести в поле "Месяц" - любое число от 01 до 12
5. Ввести в поле "Год" - последние две цифры года (например: 21)
6. Ввести в поле "Владелец" - ввалидное имя (например: Alexander)
7. Ввести в поле "CVC/CVV" - 2-х значный номер (например: 12)
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: внизу поля "CVC/CVV" появилось сообщение об ошибке "Неверный формат"

:octocat: Кредит по данным карты, указаны пустые поля:

#### Шаги:
1. Открыть в браузере страницу http://localhost:8080/
2. Кликнуть по кнопке "Купить в кредит"
3. Оставить все поля пустыми
8. Кликнуть по кнопке "Продолжить"

*Ожидаемый результат*: под каждым из полей появляется сообщение "Неверный формат", только под полем "Владелец" появляется сообщение "Поле обязательно для заполнения"

## *2. Перечень используемых инструментов с обоснованием выбора:*

- *Intelij IDEA 2021.1.3* - среда разработки, мощная и удобная IDE для java-разработки с поддержкой всех последних технологий и фреймворков.
- *Java 11* язык для написания автотестов, имеет набор готового ПО для разработки и запуска приложений.
- *Gradle* понадобится для сборки проекта, для управления подключенными зависимостями, а так же для генерации отчётов о тестировании. Он прост в использовании благодаря тому, что билд скрипты короче и чище чем у Ant и Maven.
- *JUnit 5* для написания и запуска тестов. Не требует контроля пользователя во время исполнения тестов, может запускать одновременно нектолько тестов, сообщает обо всех ошибках в ходе тестиования, предоставляет готовый набор методов для сравнения ожидаемого и фактического результатов.
- *Docker* — это программное обеспечение, которое дает возможность на определенном участке памяти изолированно установить необходимую ОС (операционную систему), версию Java, настроить переменные окружения, установить различные зависимости и дать доступ только при определенных условиях (также это инструмент, позволяющий запускать мультиконтейнерные приложения, чтобы не устанавливать на компьютер необходимые для работы приложения Node.js и СУБД).
- *Selenide* чтобы протестировать GUI. Помогает делать стабильные тесты, решая почти все проблемы с таймаутами, автоматически управляет браузером и делает скриншоты если тест упал.
- *Lombok* позволяет оптимизировать код автотестов, добавляет в Java новые «ключевые слова» и превращает аннотации в Java-код, уменьшая усилия на разработку и обеспечивая некоторую дополнительную функциональность.
- *Faker* для генерации тестовых данных. Эту библиотеку можно использовать для создания широкого спектра реально выглядящих данных от адресов до телефонных номеров.
- *Rest Assured* - java-библиотека для тестирования REST API, позволяет автоматизировать тестирование get и post запросов.
- *Allure* - фреймворк для создания отчетов о тестировании, для наглядного отображения прохождения тестов и ошибок.
- *Git и GitHub* для хранения кода. Git достаточно прост и удобен для управления исходным кодом, очень распространенная система контроля версий, поэтому достаточно хорошо взаимодействует с различными ОС. GitHub специализированный веб-сервис с удобным интерфейсои, интегрирован с Git.

## *3. Перечень и описание возможных рисков при автоматизации:*

- Невозможность запуска веб-приложения и работы с ним: приложения не загружается по указанному адресу, происходит ошибка на стороне сервера (статус 500)
- Если программисты запилили новую фичу, а нас тестировщиков не предупредили
- Отсутствие test_id усложняет написание и поддержку тестов
- Невозможность написания в форме некоторых букв (например, буквы ё)
- Долгое открытие страницы сайта, либо вкладки
- Искажение результатов тестов в связи с отсутствием доступа к реальной БД
- Возможна смена кода страницы либо css-селекторов, придется править код

## *4. Интервальная оценка с учётом рисков (в часах):*

### Необходимое время на тестирование веб-сервера составляет 41 час, с учетом рисков - 55 часов:

- подготовка окружения, инфраструктуры, развертывание БД - 8 часов
- написание автотестов, тестирование - 30 часов
- формирование и анализ отчетов - 8 часов

## *5. План сдачи работ:*

- Планировании автоматизации тестирования: с 21.07.2021 до 22.07.2021
- Непосредственно сама автоматизация: с 23.07.2021 до 07.08.2021
- Подготовка отчётных документов по итогам автоматизированного тестирования: с 08.08.2021 до 10.08.2021
- Подготовка отчётных документов по итогам автоматизации: с 10.08.2021 до 11.08.2021
